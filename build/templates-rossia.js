!function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/order/order.html",'<app-loader ng-if="vm.loading"></app-loader><div ng-if="vm.errorMessage" class="message_error">{{ vm.errorMessage | aliasDynamic }}</div><div ng-if="!vm.loading && vm.orderInfo && !vm.errorMessage" class="invoice"><div class="invoice__i"><div ng-if="vm.orderInfo.header.regnum" class="invoiceInfo"><div class="invoiceInfo__i"><span class="orderNum">{{ vm.orderInfo.header.regnum }}</span> <span class="status" ng-class="{ notPayed: vm.orderInfo.header.status == \'cancelled\' }">{{ \'web.orderInfo.label.orderStatus.\' | aliasWithPrefix:vm.orderInfo.header.status }}<wrpa ng-if="vm.orderInfo.paymentform">, {{ \'web.orderinfo.paymenttype.\' | aliasWithPrefix:vm.orderInfo.paymentform }}{{ \'. \' }}<wrap ng-if="vm.orderInfo.header.status == \'booked\' || vm.orderInfo.header.status == \'being_paid\' || vm.orderInfo.header.status == \'payment_received\'"><wrap ng-if="vm.orderInfo.header.paymentNotAllow">{{ \'web.orderInfo.label.timeoutPaymentNotAllow\' | aliasStatic}} {{ vm.orderInfo.header.validThru }}</wrap><wrap ng-if="!vm.orderInfo.header.paymentNotAllow">{{ \'web.orderInfo.label.timeout\' | aliasStatic}} {{ vm.orderInfo.header.validThru }}</wrap></wrap><wrap ng-if="(!vm.orderInfo.hasFailedServices || vm.ignoreFailedServices) && vm.orderInfo.paycode"><br>{{ \'web.orderInfo.label.paycode\' | aliasStatic}} <b>{{ vm.orderInfo.paycode }}</b></wrap></wrpa></span></div><div ng-if="vm.orderInfo.header.status == \'paid\'" class="btn_receipt_cont"><a ng-href="./receipt?pnr={{ vm.orderInfo.header.regnum }}&lastName={{ vm.lastName }}" target="_blank" class="show_receipt">{{ \'web.orderInfo.actions.receipt\' | aliasStatic}}</a> <a href="" fancybox="popupSendReceipt" class="send_receipt"></a></div></div><div class="invoiceDrops"><div ng-if="vm.orderInfo.flights.length" class="item dropWrapper" ng-class="{ active: vm.dropState[0] }"><div class="item__i"><div class="title"><a href="" ng-click="vm.dropState[0] = !vm.dropState[0]" class="openDrop"><span class="circle"><i class="icon_triangle"></i></span><route-desc segments="vm.orderInfo.flights" flights="vm.orderInfo.plainFlights"></route-desc></a></div><div class="drop" ng-class="{ show_js: vm.dropState[0] }"><div class="drop__i"><div class="choosenFlight"><div class="choosenFlight__i"><div class="chooseResult"><div class="chooseResult__i chooseResult__i__order"><div ng-repeat="(segNum, segment) in vm.orderInfo.flights" class="flight"><div class="route_item_container" ng-repeat="(flightNum, flight) in segment.flights"><div class="route_item"><div class="route__i route_container"><div class="route_table"><div class="route_table-info"><p>{{ \'web.choosenFlight.flightA\' | aliasStatic}}</p><div class="info-group"><div class="info__number">{{ flight.company.code_en }}-{{ flight.racenumber }}</div><span><i class="icon_info"></i></span></div></div><div class="dep"><p>{{ \'web.choosenFlight.departureA\' | aliasStatic}}</p><geo-marker prefix="dep__point" key="booking" city="flight.origincity" cityname="flight.origincityName" port="flight.originport" portname="flight.originportName"></geo-marker><div class="info-group"><div class="dep__date" ng-class="{ nextDay: flight.departuredayshift, attention: flight.departuredayshift}">{{ flight.departuredate | formatDate: \'D.MM.Y\' }}</div><div class="dep__time">{{ flight.departuretime }}</div></div></div><div class="info"><i class="icon_plane"></i></div><div class="arr"><p>{{ \'web.choosenFlight.arrivalA\' | aliasStatic}}</p><geo-marker prefix="arr__point" key="booking" city="flight.destinationcity" cityname="flight.destinationcityName" port="flight.destinationport" portname="flight.destinationportName"></geo-marker><div class="info-group"><div class="arr__date" ng-class="{ nextDay: flight.arrivaldayshift, attention: flight.arrivaldayshift}">{{ flight.arrivaldate | formatDate: \'D.MM.Y\' }}</div><div class="arr__time">{{ flight.arrivaltime }}</div></div></div></div></div></div><div ng-if="segment.connections[flightNum]" ng-init="connection=segment.connections[flightNum]" class="transfer"><span class="transfer__text"><strong>{{ \'web.choosenFlight.connection\' | aliasStatic}} {{ connection.time | timeAsWords }}</strong></span> <span ng-if="connection.previousAirport && connection.nextAirport && connection.previousAirport != connection.nextAirport" class="terminalChange">{{ \'web.choosenFlight.airportChange\' | aliasStatic}} (<span class="terminalName">{{ connection.previousAirport }}</span> <span class="terminalName">{{ connection.nextAirport }}</span>)</span> <span ng-if="connection.previousAirport == connection.nextAirport && connection.previousTerminal && connection.nextTerminal && connection.previousTerminal != connection.nextTerminal" class="terminalChange">{{ \'web.choosenFlight.terminalChange\' | aliasStatic}} (<span class="terminalName">{{ connection.previousTerminal }}</span> <span class="terminalName">{{ connection.nextTerminal }}</span>)</span></div><div ng-repeat="landing in flight.landings" class="landing"><span class="landing__text"><strong>{{ \'web.searchScheduleResult.landing\' | aliasStatic}}</strong></span><p class="landing__airport">{{ landing.landingCityName }} ({{ landing.landingTime | timeAsWords }})</p></div></div><div ng-if="segment.flights.length > 1" class="timeEnRoute">{{ \'web.choosenFlight.flighttime\' | aliasStatic}} {{ segment.flightTime | timeAsWords }}</div><div ng-if="segment.flights[0].brand && ( \'search.useMonoBrandCartesian\' | param )" class="tariff"><div class="tariff__include">{{ \'web.choosenFlight.tariffIncludeStart\' | aliasStatic}} {{ segment.flights[0].brandName }} {{ \'web.choosenFlight.tariffIncludeEnd\' | aliasStatic}}</div><div class="tariff__content"><span ng-repeat="prop in segment.flights[0].brandAvailableProps" class="tariff__content__item" ng-bind-html="prop"></span></div></div></div></div></div></div></div></div></div></div></div><div class="item dropWrapper" ng-class="{ active: !vm.dropState[1] }"><div class="item__i"><div class="title"><a href="" ng-click="vm.dropState[1] = !vm.dropState[1]" class="openDrop"><span class="circle"><i class="icon_triangle"></i></span> {{ \'web.orderInfo.passengers\' | aliasStatic}} <span ng-repeat="(num, passenger) in vm.orderInfo.passengers"><span ng-if="num">,</span> {{ passenger.lastName }} {{ passenger.firstName }}</span></a></div><div class="drop" ng-class="{ show_js: !vm.dropState[1] }"><div class="drop__i"><div class="passengerInvoiceInfo"><div class="passengerInvoiceInfo__i"><div class="row"><div class="row_fullpage" ng-repeat="(num, passenger) in vm.orderInfo.passengers"><div class="row_fullpage-title"><h2>{{ passenger.lastName }} {{ passenger.firstName }}<i ng-if="!passenger.hasSeats" class="icon_child-discount"></i></h2><p ng-if="passenger.tickets"><strong>{{ \'web.orderInfo.passenger.ticket\' | aliasStatic}} <span ng-repeat="(tickNum, ticket) in passenger.tickets"><span ng-if="tickNum">,</span> <span>№</span> {{ ticket }}</span></strong></p></div><div class="row_fullpage-content"><div class="row_fullpage-col row_fullpage-col_dateOfBirth"><p>{{ \'web.orderInfo.passenger.dateOfBirth\' | aliasStatic}}</p><strong>{{ passenger.dateOfBirth }}</strong></div><div class="row_fullpage-col row_fullpage-col_gender"><p>{{ \'web.orderInfo.passenger.gender\' | aliasStatic}}</p><strong>{{ \'web.orderInfo.label.gender.\' | aliasWithPrefix:passenger.gender }}</strong></div><div class="row_fullpage-col row_fullpage-col_nationality"><p>{{ \'web.orderInfo.passenger.nationality\' | aliasStatic}}</p><strong>{{ passenger.nationality }}</strong></div><div class="row_fullpage-autocol"><p>{{ \'web.orderInfo.passenger.documentType\' | aliasStatic}}</p><strong>{{ passenger.documentType }}<br><span>№</span> {{ passenger.documentNumber }}</strong></div></div></div></div></div></div></div></div></div></div><div class="item dropWrapper" ng-class="{ active: vm.dropState[2] }"><div class="item__i"><div class="title"><a href="" ng-click="vm.dropState[2] = !vm.dropState[2]" class="openDrop"><span class="circle"><i class="icon_triangle"></i></span> {{ \'web.orderInfo.label.customer\' | aliasStatic}} <span>{{ vm.orderInfo.customer.lastName }} {{ vm.orderInfo.customer.firstName }}</span></a></div><div class="drop" ng-class="{ show_js: vm.dropState[2] }"><div class="drop__i"><div class="passengerInvoiceInfo"><div class="passengerInvoiceInfo__i"><div class="row"><table><tbody><tr><td ng-if="vm.orderInfo.customer.phone"><p>{{ \'web.orderInfo.customer.phone\' | aliasStatic}} {{ vm.orderInfo.customer.phone }}</p></td><td ng-if="vm.orderInfo.customer.eMail"><p>{{ \'web.orderInfo.customer.eMail\' | aliasStatic}} {{ vm.orderInfo.customer.eMail }}</p></td></tr></tbody></table></div></div></div></div></div></div></div><div ng-if="vm.orderInfo.history.length" class="item dropWrapper" ng-class="{ active: vm.dropState[3] }"><div class="item__i"><div class="title"><a href="" ng-click="vm.dropState[3] = !vm.dropState[3]" class="openDrop"><span class="circle"><i class="icon_triangle"></i></span> {{ \'web.orderInfo.history\' | aliasStatic}}</a></div><div class="drop" ng-class="{ show_js: vm.dropState[3] }"><div class="drop__i"><div class="invoiceHistory"><div class="invoiceHistory__i"><table><tbody><tr ng-repeat="rec in vm.orderInfo.history"><td><strong>{{ rec.date }}</strong></td><td><p>{{ rec.type }}</p><p ng-if="rec.comment">{{ rec.comment }}</p></td><td class="col_amount"><p ng-if="rec.amount" ng-bind-html="{ value: rec.amount, currency: rec.currency } | price"></p></td></tr></tbody></table></div></div></div></div></div></div></div><div class="row"><div class="col"><div class="invoiceServicesSelected"><div class="invoiceServicesSelected__i"><h2 class="title">{{ \'web.orderInfo.extraServices\' | aliasStatic}}</h2><grouped-services-list order="vm.orderInfo" mode="all"></grouped-services-list><div ng-if="vm.orderInfo.hasSelectedExtraServices && vm.orderInfo.pricesNotIssued" class="btnRow"><a href="" ng-click="vm.openAddServices(vm.pnr, vm.lastName)" class="btn btn_select js-add-services">{{ \'web.buttons.payAdditionalServices\' | aliasStatic}}</a></div></div></div><div ng-if="vm.orderInfo.addingExtraServicesAllowed && !vm.checkAllPassengersHavePaidSeats()" class="otherServices"><div class="otherServices__i"><h2 class="title">{{ \'web.orderInfo.addExtraServices\' | aliasStatic}}</h2><wrap ng-bind-html="\'web.orderInfo.addExtraServices.htmlItems\' | aliasStatic"></wrap><div class="btnRow"><a href="" ng-click="vm.openAddServices(vm.pnr, vm.lastName)" class="btn btn_select js-add-services">{{ \'web.buttons.addServices\' | aliasStatic}}</a></div></div></div><div class="invoiceBottomButtons" ng-if="!vm.orderInfo.pricesNotIssued"><div class="invoiceBackToSearchOrder"><a href="#{{$root.ROUTES.SEARCH_SEPARATE_ORDER}}" class="btn btn-back-to-search-order">{{ \'web.order.form.backToSearchOrder\' | aliasStatic}}</a></div><div class="invoiceClearSession"><a href="" ng-click="vm.clearSession()" class="btn btn-clear-session">{{ \'web.buttons.clearSession\' | aliasStatic}}</a></div></div></div><a href="" name="invoiceHeader"></a><div class="col"><div class="invoiceTotal"><div class="invoiceTotal__i"><order-prices order="vm.orderInfo" mode="pricesIssued"></order-prices><order-ffp-prices summ="vm.orderInfo.ffpSumm" bonus="vm.ffpBonus"></order-ffp-prices><order-prices order="vm.orderInfo" mode="pricesNotIssued"></order-prices></div></div></div></div><payment-frame ng-if="vm.showPaymentFrame" url="vm.orderInfo.paymentRedirectTo"></payment-frame><div ng-if="!vm.showPaymentFrame" class="btn-row"><ul><li ng-if="\'site.bookingEnabled\' | param"><a href="{{ \'site.mainPageUrl\' | param }}" class="btn btn-new-booking">{{ \'web.buttons.newBooking\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.cancellationAllowed"><a href="" fancybox="popupCancelOrder" class="btn">{{ \'web.orderInfo.actions.cancel\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.refundAllowed"><a href="" ng-click="vm.openRefund(vm.pnr, vm.lastName)" class="btn">{{ \'web.orderInfo.actions.refund\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.exchangeAllowed"><a href="" ng-click="vm.openExchange(vm.pnr, vm.lastName)" class="btn">{{ \'web.orderInfo.actions.exchange\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.retryRegisterAllowed"><a href="" ng-click="vm.retryPayment()" class="btn">{{ \'web.buttons.retryPay\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.paymentConfirmationAllowed"><a href="" fancybox="popupIssueTickets" class="btn">{{ \'web.buttons.issueTickets\' | aliasStatic}}</a></li><li ng-if="vm.orderInfo.bindAlowed"><a href="" ng-click="vm.bindOrder()" class="btn">{{ \'web.buttons.bindOrder\' | aliasStatic}}</a></li></ul></div><div ng-if="vm.showBindOrderSuccessMessage" class="infoMessage"><br><br><div class="infoMessage__i"><p ng-bind-html="\'web.messages.bindOrderSuccess\' | aliasStatic"></p></div></div><div ng-if="vm.showBindOrderFailMessage" class="infoMessage infoMessage_error"><br><br><div class="infoMessage__i"><p ng-bind-html="\'web.messages.bindOrderFail\' | aliasStatic"></p></div></div></div></div><wrap ng-if="!vm.loading"><popup-cancel-order></popup-cancel-order><popup-remark></popup-remark><popup-issue-tickets mode="vm.orderInfo.paymentform"></popup-issue-tickets><popup-removed-services-warning order="vm.orderInfo"></popup-removed-services-warning><popup-send-receipt></popup-send-receipt><popup-aeroexpress-refund></popup-aeroexpress-refund></wrap>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/es-seat/es-seat.html",'<div class="item__i mobileHide"><div class="top"><div class="top__i"><table><tbody><tr><td><div class="text"><div class="iconBox" ng-click="vm.switchService()"><i class="icon_seat-reservation"></i></div><div class="name"><h2>{{ \'web.extraServices.seat.header\' | aliasStatic}} <a href=""><span class="infoBoxWrap"><i class="icon_info"></i> <span class="infoBox"><span class="infoBox__i" ng-bind-html="\'web.extraServicesRules.seat\' | aliasStatic"></span></span></span></a></h2><p>{{ \'web.extraServices.seat.desc\' | aliasStatic}}</p></div></div></td><td><div ng-if="vm.service.active && vm.service.editablePrice" class="price"><div class="price__i"><h3 ng-bind-html="{ value: vm.service.editablePrice.price, currency: vm.service.editablePrice.currency } | price"></h3></div></div></td><td><a href="" ng-click="vm.switchService()" ng-class="{ active: vm.service.active, control_disabled: vm.locked }" class="btn showDrop_js"><span class="show">{{ \'web.extraServices.seat.select\' | aliasStatic}}</span></a> <a ng-class="{ active: vm.service.active, control_disabled: vm.locked }" class="btn dropdown-button"><span class="hide">{{ \'web.extraServices.seat.deselect\' | aliasStatic}}</span></a></td></tr></tbody></table></div></div><div class="drop" ng-class="{ active: vm.service.active, show_js: vm.service.active }"><div class="drop__i"><div class="seatSelect"><div class="seatSelect__i"><div class="passengersTableSeat__wrapper" ng-class="{ one_passenger: (vm.orderInfo.passengers.length == 1) }" ng-init="vm.selectFirstAvailablePassengerFlight()"><div class="passengersSeatMapBottom"><div class="info__i"><p class="sun">{{ vm.sunInfoByFlights[vm.selectedFlight] }}</p><div ng-if="!vm.loadingSeatMap && vm.seatMap" class="seatInfo"><ul><li class="free"><span class="seat-place"></span> {{ \'web.extraServices.seat.free\' | aliasStatic}}</li><li class="selected"><span class="seat-place"></span> {{ \'web.extraServices.seat.selected\' | aliasStatic}}</li><li class="disabled"><span class="seat-place"></span> {{ \'web.extraServices.seat.disabled\' | aliasStatic}}</li><li ng-repeat="rfiscsPriceItem in vm.service.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight][0] track by $index" class="rfiscs-seat-label rfiscs-seat-label-{{ rfiscsPriceItem.rfisc }}"><span class="seat-place seat-rfisc-{{ rfiscsPriceItem.rfisc }}"></span><span class="rfiscs-seat-label-description" ng-bind-html="rfiscsPriceItem.description | aliasDynamic"></span></li><wrap ng-if="vm.hasAlias(\'web.extraServices.seat.customLabels\')" ng-bind-html="\'web.extraServices.seat.customLabels\' | aliasStatic"></wrap></ul></div></div></div><div class="passengersTable"><div ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" ng-class="{ active: vm.selectedFlight == flightNum, disabled: !vm.service.availableBySegments[flightNum] && !vm.service.hasIssuedSeatsBySegments[flightNum] }" ng-click="(vm.service.availableBySegments[flightNum] || vm.service.hasIssuedSeatsBySegments[flightNum]) && vm.selectFlightPassenger(flightNum, 0)" ng-if="vm.orderInfo.plainFlights.length > 1" class="passengersTable__segment"><div class="passengersTable__segment__route"><div class="passengersTable__segment__route__departure"><div class="passengersTable__segment__route__departure__city">{{ flight.origincityName }}</div><div ng-if="flight.originportName && flight.origincityName !== flight.originportName" class="passengersTable__segment__route__departure__port">{{ flight.originportName }}</div></div><div class="passengersTable__segment__route__dash"></div><div class="passengersTable__segment__route__arrival"><div class="passengersTable__segment__route__arrival__city">{{ flight.destinationcityName }}</div><div ng-if="flight.destinationportName && flight.destinationcityName !== flight.destinationportName" class="passengersTable__segment__route__arrival__port">{{ flight.destinationportName }}</div></div><div class="passengersTable__segment__route__wall"></div><div class="passengersTable__segment__route__date">{{ flight.date | formatDate: \'D.M.Y\'}}</div><div class="passengersTable__segment__route__plane"></div></div></div><div ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" class="passengersTable__segment-passengers" ng-class="{ active: vm.selectedFlight == flightNum }"><div class="passengersTable__segment-passengers__passenger" ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-class="{ active: (vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum), selected: (vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]), notSelected: (!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]) }"><div class="passengersTable__segment-passengers__passenger__name customCheckbox" ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" ng-if="vm.service.availableByPassengerSegments[passengerNum][flightNum] || vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]"><input type="checkbox" checked="" ng-if="vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum"> <span></span> {{ passenger.lastName }} {{ passenger.firstName }}</div><div class="passengersTable__segment-passengers__passenger__name passengersTable__segment-passengers__passenger__name_rmg" ng-if="!vm.service.availableByPassengerSegments[passengerNum] && !passenger.hasSeats"><i class="icon_child-discount"></i> {{ passenger.lastName }} {{ passenger.firstName }}</div><div class="passengersTable__segment-passengers__passenger__info" ng-if="vm.service.availableByPassengerSegments[passengerNum][flightNum] || vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]"><div class="passengersTable__segment-passengers__passenger__info__seat"><div class="passengersTable__segment-passengers__passenger__info__seat__text">{{ \'web.extraServices.seat.seatText\' | aliasStatic}}</div><div class="passengersTable__segment-passengers__passenger__info__seat__number" ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]">{{ vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].value }}</div><div class="passengersTable__segment-passengers__passenger__info__seat__number" ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]">{{ vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].value }}</div><div class="passengersTable__segment-passengers__passenger__info__seat__no-number" ng-if="!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]">{{ \'web.extraServices.seat.noSeatSelected\' | aliasStatic}}</div></div><div class="passengersTable__segment-passengers__passenger__info__price"><div class="passengersTable__segment-passengers__passenger__info__price__text">{{ \'web.extraServices.seat.seatPrice\' | aliasStatic}}</div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]" ng-bind-html="{ value: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]" ng-bind-html="{ value: vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]">0 <span class="currency_sign">₽</span></div></div></div></div></div><div class="passengersTable__cancel"><a href="" ng-click="vm.switchService()" ng-class="{ control_disabled: vm.locked }" class="btn active"><span class="hide">{{ \'web.extraServices.seat.deselect\' | aliasStatic}}</span></a></div></div><div class="passengersSeatMap"><div ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" ng-class="{ active: vm.selectedFlight == flightNum }" class="passengersSeatMap__segment"><div ng-if="vm.loadingSeatMap" class="seat-map-loader" ng-bind-html="\'web.extraServices.seat.loader\' | aliasStatic"></div><div ng-if="vm.seatMapError" class="seat-map-error">{{ vm.seatMapError | aliasDynamic }}</div><div ng-if="!vm.loadingSeatMap && vm.seatMap" class="col mobileHide customScroll_height customScroll_js" custom-scroll=""><seat-map map="vm.seatMap" passenger="vm.selectedPassenger" flight="vm.selectedFlight" locked="vm.locked" selected="vm.service.selectedSeatsByPassengerSegments" set="vm.setPassengerFlightSeat" issued="vm.service.issuedSeatsByPassengerSegments"></seat-map></div></div></div></div></div></div></div></div></div><div class="item__i mobileShow"><div class="top"><div class="top__i"><a href=""><div class="row"><table><tbody><tr><td><i class="icon_seat"></i></td><td><div class="name">{{ \'web.extraServices.seat.header\' | aliasStatic}} <a href="" class="js-mob-icon_info"><span class="infoBoxWrap"><i class="icon_info"></i> <span class="infoBox js-mob-infoBox"><span class="infoBox__i" ng-bind-html="\'web.extraServicesRules.seat\' | aliasStatic"></span></span></span></a><p>{{ \'web.extraServices.seat.desc\' | aliasStatic}}</p><div ng-if="vm.service.active && vm.service.editablePrice" class="price"><div class="price__i"><h3 ng-bind-html="{ value: vm.service.editablePrice.price, currency: vm.service.editablePrice.currency } | price"></h3></div></div></div></td></tr></tbody></table></div></a><div class="row seatSelect" ng-class="{ active: vm.service.active }"><a href="" ng-click="vm.switchService()" ng-class="{ active: vm.service.active, control_disabled: vm.locked }" class="btn showDrop_js"><span class="show">{{ \'web.extraServices.seat.select\' | aliasStatic}}</span></a> <a ng-class="{ active: vm.service.active, control_disabled: vm.locked }" class="btn dropdown-button"><span class="hide">{{ \'web.extraServices.seat.deselect\' | aliasStatic}}</span></a></div></div></div><div class="drop" ng-class="{ active: vm.service.active, show_js: vm.service.active }"><div class="drop__i"><div class="seatSelect drop_mobile"><div class="seatSelect__i"><div class="passengersTableSeat__wrapper" ng-class="{ one_passenger: (vm.orderInfo.passengers.length == 1) }"><div class="passengersTable"><div ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" ng-class="{ active: vm.selectedFlight == flightNum, disabled: !vm.service.availableBySegments[flightNum] && !vm.service.hasIssuedSeatsBySegments[flightNum] }" ng-click="(vm.service.availableBySegments[flightNum] || vm.service.hasIssuedSeatsBySegments[flightNum]) && vm.selectFlightPassenger(flightNum, 0)" ng-if="vm.orderInfo.plainFlights.length > 1" class="passengersTable__segment"><div class="passengersTable__segment__route"><div class="passengersTable__segment__route__departure"><div class="passengersTable__segment__route__departure__city">{{ flight.origincityName }}</div><div ng-if="flight.originportName && flight.origincityName !== flight.originportName" class="passengersTable__segment__route__departure__port">{{ flight.originportName }}</div></div><div class="passengersTable__segment__route__dash"></div><div class="passengersTable__segment__route__arrival"><div class="passengersTable__segment__route__arrival__city">{{ flight.destinationcityName }}</div><div ng-if="flight.destinationportName && flight.destinationcityName !== flight.destinationportName" class="passengersTable__segment__route__arrival__port">{{ flight.destinationportName }}</div></div><div class="passengersTable__segment__route__wall"></div><div class="passengersTable__segment__route__date">{{ flight.date | formatDate: \'D.M.Y\'}}</div><div class="passengersTable__segment__route__plane"></div></div></div><div ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" class="passengersTable__segment-passengers" ng-class="{ active: vm.selectedFlight == flightNum }"><div class="passengersTable__segment-passengers__passenger" ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-class="{ active: (vm.selectedFlight == flightNum && vm.selectedPassenger == passengerNum), selected: (vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]), notSelected: (!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]) }"><div class="passengersTable__segment-passengers__passenger__name">{{ passenger.lastName }} {{ passenger.firstName }} <i ng-if="!vm.service.availableByPassengerSegments[passengerNum] && !passenger.hasSeats" class="icon_child-discount"></i></div><div class="passengersTable__segment-passengers__passenger__info" ng-if="vm.service.availableByPassengerSegments[passengerNum][flightNum] || vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]"><div class="passengersTable__segment-passengers__passenger__info__seat"><div class="passengersTable__segment-passengers__passenger__info__seat__text">{{ \'web.extraServices.seat.seatText\' | aliasStatic }}</div><div class="passengersTable__segment-passengers__passenger__info__seat__number" ng-class="{ selected: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] || vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum], notSelected: !vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]}"><div class="passengersTable__segment-passengers__passenger__info__seat__number__value" ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]">{{ vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].value }}</div><div class="passengersTable__segment-passengers__passenger__info__seat__number__value" ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]">{{ vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].value }}</div><a ng-click="vm.selectFlightPassenger(flightNum, passengerNum)" href="" fancybox="popupSeat" class="passengersTable__segment-passengers__passenger__info__seat__number____link" ng-class="{ selected: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] || vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum], notSelected: !vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]}"><span ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]" class="passengersTable__segment-passengers__passenger__info__seat__number____link__text">{{ \'web.extraServices.seat.changeSeat\' | aliasStatic }}</span> <span ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]" class="passengersTable__segment-passengers__passenger__info__seat__number____link__text">{{ \'web.extraServices.seat.lookOnSeat\' | aliasStatic }}</span> <span ng-if="!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]" class="passengersTable__segment-passengers__passenger__info__seat__number____link__text">{{ \'web.extraServices.seat.selectItem\' | aliasStatic }}</span></a></div></div><div class="passengersTable__segment-passengers__passenger__info__price"><div class="passengersTable__segment-passengers__passenger__info__price__text">{{ \'web.extraServices.seat.seatPrice\' | aliasStatic }}</div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum]" ng-bind-html="{ value: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]" ng-bind-html="{ value: vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="!vm.service.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.service.issuedSeatsByPassengerSegments[passengerNum][flightNum]">0 <span class="currency_sign">₽</span></div></div></div></div></div></div></div><div class="passengersTable__cancel"><a href="" ng-click="vm.switchService()" ng-class="{ control_disabled: vm.locked }" class="btn active"><span class="hide">{{ \'web.extraServices.seat.deselect\' | aliasStatic}}</span></a></div></div></div></div></div><popup-seat map="vm.seatMap" sun="vm.sunInfoByFlights[vm.selectedFlight]" order="vm.orderInfo" passenger="vm.selectedPassenger" flight="vm.selectedFlight" locked="vm.locked" select-handler="vm.setPassengerFlightSeat" remove-handler="vm.removePassengerFlightSeat" selected="vm.service.selectedSeatsByPassengerSegments" subgroups="vm.service.subgroups" items="vm.service.itemsByPassengerSegments" issued="vm.service.issuedSeatsByPassengerSegments"></popup-seat></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/seat-map/seat-map.html",'<div class="seatMap" ng-class="{ control_disabled: vm.locked }"><div class="seatMap__i"><div ng-repeat="deck in vm.seatMap.decks" class="planeBody deck-code-{{deck.code}}"><div ng-if="deck.code" class="deck-label deck-label-{{deck.code}}" ng-bind-html="\'web.seatMap.deckLabel.\' | aliasWithPrefix:deck.code"></div><div class="planeBody__i"><table ng-repeat="cabin in deck.cabins" class="cabin-code-{{cabin.code}}"><tbody><tr ng-repeat="row in cabin.rows" class="row-number-{{row.number}} {{ vm.getRowSeatsUniqueCssPropertiesClasses(row.items) }}" ng-class="{ wingsStart: row.wingsStart, atWing: row.atWing, wingsEnd: row.wingsEnd }"><td class="row-num">{{ row.number }}</td><td ng-repeat="item in row.items"><div ng-if="item.type == \'chair\'" class="seat seat-cost-{{ vm.replaceDots(item.cost || \'none\') }} seat-rfisc-{{ item.rfisc || \'none\' }} {{ vm.getSeatCssPropertiesClasses(item) }}" ng-click="vm.setPassengerFlightSeat(item, cabin.allowed, row.number)" ng-class="{ seat_disabled: (!item.free || !item.available || !cabin.allowed), active: vm.isSelectedByActivePassenger(row.number + item.number), selectedByOrderPassenger: vm.isSelectedByOrderPassenger(row.number + item.number) }"><span class="seat-number">{{ item.number }}</span><div ng-if="item.free && item.available && cabin.allowed" class="seatName">{{ row.number }}{{ item.number }}<wrap ng-if="item.cost">{{\' - \'}}<wrap ng-bind-html="{ value: item.cost, currency: item.currency } | price"></wrap></wrap></div></div></td></tr></tbody></table></div></div></div></div>');
}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/grouped-services-list/grouped-services-list.html",'<wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ].length"><div ng-repeat="extraService in vm.orderInfo.all_extra_services" class="included-service included-service__{{ extraService.code }}" ng-if="!extraService.empty"><div class="included-service__total"><div class="included-service__total__img included-service__total__img__{{ extraService.code }}"></div><div ng-if="vm.orderInfo[\'pricesNotIssued\'].totalExtraServiceByGroup[extraService.code]" class="included-service__total__info"><div class="included-service__total__info__text">{{ \'web.orderInfo.prices.total\' | aliasWithPrefix:(extraService.code | capitalizeFirstLetter) }}</div><div class="included-service__total__info__price" ng-bind-html="{ value: vm.orderInfo[\'pricesNotIssued\'].totalExtraServiceByGroup[extraService.code], currency: vm.orderInfo[\'pricesNotIssued\'].currency } | price"></div></div></div><div ng-repeat="(passengerNumber, passenger) in vm.orderInfo.passengers" ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ][passengerNumber] && extraService.passengers[passengerNumber].segments.length" class="included-service__passenger"><div class="included-service__passenger__name">{{ passenger.lastName }} {{ passenger.firstName }}</div><div ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ][passengerNumber].passengerSegmentServices" class="included-service__passenger__services"><div ng-repeat="(segmentNumber, segment) in vm.orderInfo.plainFlights" class="included-service__passenger__services__segment" ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ][passengerNumber].passengerSegmentServices[segmentNumber]"><div ng-repeat="passengerSegmentService in vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ][passengerNumber].passengerSegmentServices[segmentNumber]" ng-if="extraService.code == passengerSegmentService.code"><div class="included-service__passenger__services__segment__code">{{ \'web.orderInfo.extraServices.flight\' | aliasStatic}} {{ segment.company.code }}-{{ segment.racenumber }}</div><div class="included-service__passenger__services__segment__route"><div class="included-service__passenger__services__segment__route__departure"><div class="included-service__passenger__services__segment__route__departure__city">{{ segment.origincityName }}</div><div ng-if="segment.originportName && segment.origincityName !== segment.originportName" class="included-service__passenger__services__segment__route__departure__port">{{ segment.originportName }}</div></div><div class="included-service__passenger__services__segment__route__dash"></div><div class="included-service__passenger__services__segment__route__arrival"><div class="included-service__passenger__services__segment__route__arrival__city">{{ segment.destinationcityName }}</div><div ng-if="segment.destinationportName && segment.destinationcityName !== segment.destinationportName" class="included-service__passenger__services__segment__route__arrival__port">{{ segment.destinationportName }}</div></div></div><div class="included-service__passenger__services__segment__service"><div ng-class="{ line_through: passengerSegmentService.serviceItem.removed }" title="{{ (passengerSegmentService.serviceItem.removed ? ( \'web.orderInfo.extraServiceRemoved\' | aliasStatic) : \'\') }}" class="included-service__passenger__services__segment__service__text"><span class="included-service__passenger__services__segment__service__text__title">{{ \'web.orderInfo.extraServices.\' + passengerSegmentService.code | aliasStatic}}</span> <span class="included-service__passenger__services__segment__service__text__value" ng-if="passengerSegmentService.code == \'seat\'">{{ passengerSegmentService.serviceItem.value }}</span> <span class="included-service__passenger__services__segment__service__text__value" ng-if="passengerSegmentService.code == \'meal\' || passengerSegmentService.code == \'baggage\'">{{ passengerSegmentService.serviceItem.title }}</span></div><div class="included-service__passenger__services__segment__service__price" ng-if="passengerSegmentService.serviceItem.status !== \'ISSUED_WITH_EMD\'" ng-bind-html="{ value: passengerSegmentService.serviceItem.totalPrice, currency: passengerSegmentService.serviceItem.currency } | price"></div><div class="included-service__passenger__services__segment__service__price included-service__passenger__services__segment__service__price_issued" ng-if="passengerSegmentService.serviceItem.status == \'ISSUED_WITH_EMD\'">{{ \'web.serviceStatus.ISSUED_WITH_EMD\' | aliasStatic }}</div></div></div></div></div></div></div><wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesForAllPassengers\' ].length"><div class="item"><div class="item__i"><p><strong>{{ \'web.orderInfo.extraServicesForAllPassengers\' | aliasStatic}}</strong></p><wrap ng-repeat="orderService in vm.orderInfo[ vm.mode + \'ExtraServicesForAllPassengers\' ]"><p ng-if="orderService.code == \'insurance\' && orderService.items[0][0]" ng-bind-html="\'web.insurance.\' | aliasWithPrefix:(orderService.items[0][0].ins + \'.\' + orderService.items[0][0].tins)"></p></wrap></div></div></wrap></wrap><wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ].length"><wrap ng-repeat="(passengerNumber, passenger) in vm.orderInfo.extraPassengers" ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ][passengerNumber]"><div class="item"><div class="item__i"><p><strong>{{ passenger.lastName }} {{ passenger.firstName }}</strong></p><wrap ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ][passengerNumber].passengerSegmentServices"><wrap ng-repeat="(segmentNumber, segment) in vm.orderInfo.plainFlights"><div ng-if="vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ][passengerNumber].passengerSegmentServices[segmentNumber]" class="passenger-segment-services">{{ \'web.orderInfo.extraServices.flight\' | aliasStatic}} {{ segment.company.code }}-{{ segment.racenumber }}<ul><wrap ng-repeat="passengerSegmentService in vm.orderInfo[ vm.mode + \'ExtraServicesByExtraPassengers\' ][passengerNumber].passengerSegmentServices[segmentNumber]"><li ng-if="passengerSegmentService.code == \'aeroexpress\'"><span ng-class="{ line_through: passengerSegmentService.serviceItem.removed }" title="{{ (passengerSegmentService.serviceItem.removed ? ( \'web.orderInfo.extraServiceRemoved\' | aliasStatic) : \'\') }}">{{ \'web.orderInfo.extraServices.aeroexpress\' | aliasStatic}} {{ passengerSegmentService.serviceItem.departure_date }} {{ passengerSegmentService.serviceItem.departure_name }} - {{ passengerSegmentService.serviceItem.arrival_name }}</span></li></wrap></ul></div></wrap></wrap></div></div></wrap></wrap><wrap ng-if="!vm.orderInfo.allExtraServicesForAllPassengers.length && !vm.orderInfo[ vm.mode + \'ExtraServicesByPassengers\' ].length"><p>{{ \'web.orderInfo.extraServicesEmpty\' | aliasStatic}}</p></wrap>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("components/popup-seat/popup-seat.html",'<div class="popup popup_selectSeat" id="popupSeat" style="display: none;"><div class="seatSlider"><div class="seatSlider__i slick-initialized slick-slider"><div class="slick-list draggable"><div class="slick-track" role="listbox"><div class="item slick-slide slick-cloned"><div class="itemTitle seatPopupTitle"><div class="itemTitle__i"><p><geo-marker prefix="dep__point" key="popup-seat" city="vm.orderInfo.plainFlights[vm.selectedFlight].origincity" cityname="vm.orderInfo.plainFlights[vm.selectedFlight].origincityName" port="vm.orderInfo.plainFlights[vm.selectedFlight].originport" portname="vm.orderInfo.plainFlights[vm.selectedFlight].originportName"></geo-marker>–<geo-marker prefix="arr__point" key="popup-seat" city="vm.orderInfo.plainFlights[vm.selectedFlight].destinationcity" cityname="vm.orderInfo.plainFlights[vm.selectedFlight].destinationcityName" port="vm.orderInfo.plainFlights[vm.selectedFlight].destinationport" portname="vm.orderInfo.plainFlights[vm.selectedFlight].destinationportName"></geo-marker></p><p>{{ vm.orderInfo.passengers[vm.selectedPassenger].lastName }} {{ vm.orderInfo.passengers[vm.selectedPassenger].firstName }}</p></div></div><div class="info seatPopupInfo"><div class="info__i"><p class="plane">{{ vm.orderInfo.plainFlights[vm.selectedFlight].airplaneName || vm.orderInfo.plainFlights[vm.selectedFlight].airplane }}</p><p class="sun">{{ vm.sunInfo }}</p><div class="seatInfo"><ul><li class="free"><span class="seat-place"></span> {{ \'web.extraServices.seat.free\' | aliasStatic}}</li><li class="selected"><span class="seat-place"></span> {{ \'web.extraServices.seat.selected\' | aliasStatic}}</li><li class="disabled"><span class="seat-place"></span> {{ \'web.extraServices.seat.disabled\' | aliasStatic}}</li><li ng-repeat="rfiscsPriceItem in vm.itemsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight][0] track by $index" class="rfiscs-seat-label rfiscs-seat-label-{{ rfiscsPriceItem.rfisc }}"><span class="seat-place seat-rfisc-{{ rfiscsPriceItem.rfisc }}"></span><span class="rfiscs-seat-label-description" ng-bind-html="rfiscsPriceItem.description | aliasDynamic"></span></li><wrap ng-if="vm.hasAlias(\'web.extraServices.seat.customLabels\')" ng-bind-html="\'web.extraServices.seat.customLabels\' | aliasStatic"></wrap></ul></div></div></div><div class="seatSelect seatPopupSeatMap"><seat-map ng-if="vm.seatMap" map="vm.seatMap" passenger="vm.selectedPassenger" flight="vm.selectedFlight" selected="vm.selectedSeatsByPassengerSegments" locked="vm.locked" set="vm.setPassengerFlightSeat" issued="vm.issuedSeatsByPassengerSegments"></seat-map></div><div class="seatPopupBottom"><div class="seatPopupBottom__selectedInfo__wrapper" ng-repeat="(flightNum, flight) in vm.orderInfo.plainFlights" ng-if="vm.selectedFlight == flightNum"><div class="seatPopupBottom__selectedInfo" ng-repeat="(passengerNum, passenger) in vm.orderInfo.passengers" ng-if="vm.selectedPassenger == passengerNum"><div class="passengersTable__segment-passengers__passenger__info__seat"><div class="passengersTable__segment-passengers__passenger__info__seat__text">{{ \'web.extraServices.seat.seatText\' | aliasStatic}}</div><div class="passengersTable__segment-passengers__passenger__info__seat__number" ng-if="vm.selectedSeatsByPassengerSegments[passengerNum][flightNum]">{{ vm.selectedSeatsByPassengerSegments[passengerNum][flightNum].value }}</div><div class="passengersTable__segment-passengers__passenger__info__seat__number" ng-if="vm.issuedSeatsByPassengerSegments[passengerNum][flightNum]">{{ vm.issuedSeatsByPassengerSegments[passengerNum][flightNum].value }}</div><div class="passengersTable__segment-passengers__passenger__info__seat__no-number" ng-if="!vm.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.issuedSeatsByPassengerSegments[passengerNum][flightNum]">{{ \'web.extraServices.seat.noSeatSelected\' | aliasStatic}}</div></div><div class="passengersTable__segment-passengers__passenger__info__price"><div class="passengersTable__segment-passengers__passenger__info__price__text">{{ \'web.extraServices.seat.seatPrice\' | aliasStatic}}</div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="vm.selectedSeatsByPassengerSegments[passengerNum][flightNum]" ng-bind-html="{ value: vm.selectedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.selectedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="vm.issuedSeatsByPassengerSegments[passengerNum][flightNum]" ng-bind-html="{ value: vm.issuedSeatsByPassengerSegments[passengerNum][flightNum].totalPrice, currency: vm.issuedSeatsByPassengerSegments[passengerNum][flightNum].currency } | price"></div><div class="passengersTable__segment-passengers__passenger__info__price__money" ng-if="!vm.selectedSeatsByPassengerSegments[passengerNum][flightNum] && !vm.issuedSeatsByPassengerSegments[passengerNum][flightNum]">0 <span class="currency_sign">₽</span></div></div></div></div><div class="seatPopupBottom__buttons"><div class="btnRow seatPopupBottom__buttons__deselectSeat" ng-if="!vm.selectedSeatsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight] && !vm.issuedSeatsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]"><a href="" ng-click="vm.close();" class="btn btn_ready closePopup_js">{{ \'web.popupSeat.clear\' | aliasStatic}}</a></div><div class="btnRow seatPopupBottom__buttons__deselectSeat" ng-if="vm.selectedSeatsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]"><a href="" ng-click="vm.close(); vm.removePassengerFlightSeat(vm.selectedPassenger, vm.selectedFlight);" class="btn btn_ready closePopup_js">{{ \'web.popupSeat.clear\' | aliasStatic}}</a></div><div class="btnRow seatPopupBottom__buttons__close" ng-if="vm.selectedSeatsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight] || vm.issuedSeatsByPassengerSegments[vm.selectedPassenger][vm.selectedFlight]"><a href="" ng-click="vm.close()" class="btn btn_ready closePopup_js">{{ \'web.popupSeat.ok\' | aliasStatic}}</a></div></div></div></div></div></div></div></div></div>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("screens/add-services/add-services.html",'<app-loader ng-if="vm.loading || vm.confirmLoading || vm.searchOrderLoading || vm.modifyServicesLoading || vm.orderServicesLoading"></app-loader><section class="out" ng-if="!vm.loading"><app-header></app-header><div ng-if="vm.orderInfo && !vm.fatalError" class="content content-add-services"><div class="wrap wrap_pt32"><div class="content__i"><div class="searchResultsControl searchResultsControl__back"><div class="searchResultsControl__i"><a href="" ng-click="vm.openOrder(vm.pnr, vm.lastName)" class="btn btn_back">{{ \'web.addServices.backToOrder\' | aliasStatic}}</a></div></div><div class="checkoutServices"><div class="checkoutServices__i"><h2 class="title">{{ \'web.addServices.header\' | aliasStatic}}<div class="orderInfo"><span>{{ \'web.addServices.regnumLabel\' | aliasStatic}}{{ vm.pnr }}</span> <span>{{ \'web.addServices.routeLabel\' | aliasStatic}}{{ \' \' }}<wrap ng-repeat="(num, segment) in vm.orderInfo.flights">{{ num ? \' – \' : \'\' }}<geo-marker prefix="dep__point" key="add-services" city="segment.flights[0].origincity" cityname="segment.flights[0].origincityName" port="segment.flights[0].originport" portname="segment.flights[0].originportName"></geo-marker><wrap ng-if="num == vm.orderInfo.flights.length-1">{{ \' – \' }}<geo-marker prefix="arr__point" key="add-services" city="segment.flights[segment.flights.length-1].destinationcity" cityname="segment.flights[segment.flights.length-1].destinationcityName" port="segment.flights[segment.flights.length-1].destinationport" portname="segment.flights[segment.flights.length-1].destinationportName"></geo-marker></wrap></wrap>{{ \', \' }}<wrap ng-repeat="(num, segment) in vm.orderInfo.flights">{{ num ? \' – \' : \'\' }} {{ segment.date | formatDate: \'D MMM\' }}</wrap></span></div></h2><div ng-if="!vm.es" class="emptyServices">{{ \'web.addServices.emptyServices\' | aliasStatic}}<br><br><br></div><div ng-if="vm.modifyServicesError" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p ng-bind-html="vm.modifyServicesError | aliasDynamic"></p></div></div><extra-services-list ng-if="vm.es" es="vm.es" list="vm.esList" locked="vm.modifyServicesLoading || vm.orderServicesLoading"></extra-services-list><div class="invoiceBottomButtons"><div class="invoiceBackToSearchOrder"><a href="" ng-click="vm.openOrder(vm.pnr, vm.lastName)" class="btn btn-back-to-search-order">{{ \'web.addServices.backToOrder\' | aliasStatic}}</a></div><div class="invoiceClearSession" ng-if="!vm.orderInfo.pricesNotIssued"><a href="" ng-click="vm.clearSession()" class="btn btn-clear-session">{{ \'web.buttons.clearSession\' | aliasStatic}}</a></div></div></div></div><br><br><div ng-if="vm.orderInfo.hasSelectedExtraServices" class="invoice"><div class="add-services-price-wrapper"><div class="add-services-price-wrapper__row"><div class="invoiceServicesSelected"><div class="invoiceServicesSelected__i"><h2 class="title">{{ \'web.orderInfo.pricesNotIssued\' | aliasStatic}}</h2><div class="add-services-price-wrapper__row__grouped-services-list"><grouped-services-list order="vm.orderInfo" mode="editable"></grouped-services-list></div></div></div></div><div class="add-services-price-wrapper__row"><div class="invoiceTotal"><div class="invoiceTotal__i"><order-ffp-prices summ="vm.orderInfo.ffpSumm" bonus="vm.ffpBonus"></order-ffp-prices><div class="add-services-price-wrapper__row__total-price"><div class="add-services-price-wrapper__row__total-price__text">{{ \'web.orderInfo.prices.totalPrice\' | aliasStatic}}</div><div class="add-services-price-wrapper__row__total-price__price" ng-bind-html="{ value: vm.orderInfo[\'pricesNotIssued\'].totalPrice, currency: vm.orderInfo[\'pricesNotIssued\'].currency } | price"></div></div><div class="bonus add-services-price-wrapper__row__ffpSumm" ng-if="vm.orderInfo.ffpSumm"><table><tbody><tr><td><div class="accruedMiles"><i class="icon_milesPay"></i>{{ \'web.orderInfo.prices.ffpSumm\' | aliasStatic }}</div></td><td ng-bind-html="{ value: vm.orderInfo.ffpSumm, currency: \'miles\' } | price"></td></tr></tbody></table></div><div class="bonus add-services-price-wrapper__row__ffpBonus" ng-if="vm.ffpBonus"><table><tbody><tr><td><div class="accruedMiles"><i class="icon_milesPay"></i>{{ \'web.orderInfo.prices.ffpBonus\' | aliasStatic }}</div></td><td ng-bind-html="{ value: vm.ffpBonus, currency: \'miles\' } | price"></td></tr></tbody></table></div></div></div></div></div></div><br><br><br><div ng-if="vm.orderInfo.hasSelectedExtraServices && vm.priceVariant" class="payMethods"><div class="payMethods__i"><wrap ng-show="!vm.orderInfo.hasOnlyFreeSelectedExtraServices"><h2 class="title">{{ \'web.paymentTypeSelect.header\' | aliasStatic}}</h2><payment-type-select price-variant="vm.priceVariant" change-handler="vm.paymentFormChangeHandler" selected-payment-type="vm.selectedPaymentType" selected-payment-form="vm.selectedPaymentForm"></payment-type-select></wrap><div class="iconfirm"><div class="iconfirm__i"><div class="customCheckbox"><label><input type="checkbox" id="iconfirm" ng-model="vm.agree"><span></span></label></div><p><label for="iconfirm"><wrap ng-bind-html="\'web.addServices.agree\' | aliasStatic"></wrap></label></p></div></div></div></div><div class="searchResultsControl searchResultsControl__forward"><div class="searchResultsControl__i"><a href="" ng-if="vm.orderInfo.hasSelectedExtraServices && !vm.confirmLoading" ng-click="vm.submitPayment()" ng-class="{ disabled: (!vm.agree || !vm.selectedPaymentForm || !vm.selectedPaymentType || vm.modifyServicesLoading || vm.orderServicesLoading) }" class="btn btn_next"><span class="mobileHide">{{ vm.orderInfo.hasOnlyFreeSelectedExtraServices ? \'web.buttons.confirmAddServices\' : \'web.buttons.gotoPayment\' | aliasStatic}}</span> <span class="mobileShow">{{ \'web.buttons.next\' | aliasStatic}}</span></a></div></div><div ng-if="vm.showNeedSelectPaymentFormMesage" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p>{{ \'web.messages.needSelectPaymentForm\' | aliasStatic}}</p></div></div><div ng-if="vm.confirmError" class="infoMessage infoMessage_error"><div class="infoMessage__i"><p ng-if="vm.confirmError === true">{{ \'web.messages.startPaymentForExtraServicesError\' | aliasStatic}}</p><p ng-if="vm.confirmError !== true">{{ vm.confirmError | aliasDynamic }}</p></div></div></div></div></div><div class="content" ng-if="vm.errorMessage"><div class="wrap wrap_pt32"><div class="content__i"><div><div class="popup__i__caption"><div class="message_error">{{ vm.errorMessage | aliasDynamic }}</div></div></div></div></div></div><div class="content" ng-if="vm.fatalError"><div class="wrap wrap_pt32"><div class="content__i"><div><div class="popup__i__caption"><div class="message_error">{{ vm.fatalError | aliasDynamic }}</div></div></div><div class="searchResultsControl"><div class="searchResultsControl__i"><a href="" ng-click="vm.reloadPage()" class="btn btn_next">{{ \'web.buttons.reloadPage\' | aliasStatic}}</a></div></div></div></div></div><div class="push"></div></section><app-footer ng-if="!vm.loading"></app-footer><wrap ng-if="!vm.loading"><popup-alias></popup-alias><popup-change-currency-error></popup-change-currency-error></wrap>')}])}(),function(e){try{e=angular.module("app")}catch(s){e=angular.module("app",[])}e.run(["$templateCache",function(e){e.put("screens/search-order/search-order.html",'<app-loader ng-if="vm.loading"></app-loader><section class="out" ng-if="!vm.loading"><app-header></app-header><div class="content"><div class="wrap wrap_pt32"><div class="content__i"><div ng-show="!vm.orderLoaded" class="orderSearchForm orderSearchForm_change" style="display: block;"><div class="orderSearchForm__i"><div class="formBody"><form class="formBody__i" name="vm.searchOrderForm" ng-submit="vm.submitSearch();" form-submit-error-highlight="" novalidate=""><div class="formBodyItem"><div class="steps active"><div class="steps__i"><h2 class="search-order-form-title">{{ \'web.order.form.title\' | aliasStatic}}</h2><div class="item item_order_search_params"><div class="item__i"><div class="col"><div class="inp"><div class="inp__i"><error-message control="vm.searchOrderForm.pnr" touched="vm.submitTouched"></error-message><input type="text" tabindex="3" placeholder="{{ \'web.order.form.pnr\' | aliasStatic}}" class="textInp" name="pnr" ng-model="vm.searchParams.pnr" ng-change="vm.clear()" ng-pattern="vm.pnrOrTicketRegexp" clean-search-order-param="" error-highlight="{{ vm.submitTouched }}" required=""></div></div></div><div class="col"><div class="inp"><div class="inp__i"><error-message control="vm.searchOrderForm.lastName" touched="vm.submitTouched"></error-message><input type="text" tabindex="4" placeholder="{{ \'web.order.form.lastName\' | aliasStatic}}" class="textInp" name="lastName" ng-model="vm.searchParams.lastName" ng-change="vm.clear()" ng-pattern="vm.passengerLastNameRegexp" clean-search-order-param="" error-highlight="{{ vm.submitTouched }}" required=""></div></div></div></div></div><div class="search-order-form-btn-wrapper"><div class="search-order-form-btn-wrapper__accept customCheckbox"><label class="search-order-form-btn-wrapper__accept__label"><input type="checkbox" name="conditions-agree" id="conditions-agree" value="on" onclick="toggleAcceptCheckbox()"> <span class="search-order-form-btn-wrapper__accept__label__checkbox" id=""></span> {{ \'web.order.form.acceptRule1\' | aliasStatic}} <a href="{{ \'web.order.form.acceptRule1Link\' | aliasStatic}}" target="_blank">{{ \'web.order.form.acceptRule1Text\' | aliasStatic}}</a><br>{{ \'web.order.form.acceptRule2\' | aliasStatic}} <a href="{{ \'web.order.form.acceptRule2Link\' | aliasStatic}}" target="_blank">{{ \'web.order.form.acceptRule2Text\' | aliasStatic}}</a></label></div><button class="disabled btn btn_search btn_formSearch btn_formSearch_js" id="search-order-form-btn" disabled="disabled">{{ \'web.order.form.searchButton\' | aliasStatic}}</button></div></div></div></div><div class="search-order-form-footer" ng-bind-html="\'web.order.form.footer\' | aliasStatic"></div></form></div></div></div><p ng-if="vm.orderLoaded" class="invoiceBack"><a href="#{{$root.ROUTES.SEARCH_ORDER}}" class="back">{{ \'web.order.form.backToSearchOrder\' | aliasStatic}}</a></p><order ng-if="vm.pnr && vm.lastName && vm.searchOrderForm.$valid" pnr="vm.pnr" lastname="vm.lastName"></order></div></div></div><div class="push"></div></section><app-footer ng-if="!vm.loading"></app-footer>')}])}();